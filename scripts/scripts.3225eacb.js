"use strict";angular.module("42straatApp",["ngRoute","ngTouch","ngLocale","/mr/session","/mr/form","templates-pages"]).config(["$routeProvider",function(a){a.when("/signin",{templateUrl:"pages/signin/signin.html",signin:!0}).when("/signup",{templateUrl:"pages/signup/signup.html",signin:!0}).when("/",{templateUrl:"pages/land/land.html",signin:!0}).when("/my",{templateUrl:"pages/home/home.html",auth:!0}).when("/house/build",{templateUrl:"pages/projects/build/house.html"}).otherwise({redirectTo:"/"})}]).run(["Session","$location","$rootScope","$route","$window",function(a,b,c,d,e){function f(a){b.path(a)}function g(a){var b;return angular.forEach(j,function(c){!b&&c.regexp.test(a)&&(b=c)}),b||j[null]}var h="/signin",i="/my",j=d.routes;a.setConfig({apiUrl:"http://api.45straat.nl/api",tokenUrl:"login",userDataUrl:"/$api$/users/$username$",apiPlaceholder:"/$api$",publicApiPlaceholder:"/$public/api$"}),c.$on("$locationChangeStart",function(){var c=g(b.path());c&&(c.auth&&!a.authorized?f(h):c.signin&&a.authorized&&f(i))}),c.$on("$routeChangeStart",function(){e.scrollTo(0,0)}),a.$watch("authorized",function(a){console.log("Auth changed"),d.current?a&&d.current.$$route.signin?f(i):!a&&d.current.$$route.auth&&f(h):console.log("Wtf?")})}]),angular.module("42straatApp").controller("/pages/build/house/new",["$scope","/pages/build/house/tags","/constants/cities/netherlands",function(a,b,c){function d(a){return a?a.filter(function(a){return a.checked}).map(function(a){return a.model}):[]}function e(a){var b=[];return angular.forEach(a,function(a){b.push({model:a,checked:-1!==["Construction Company","Architect","Mortgage Adviser"].indexOf(a)})}),b}function f(a){var b=[];return angular.forEach(a,function(a,c){b=b.concat(a.map(function(a){return{name:a,province:c}}))}),b}a.project={tags:e(b)};a.Cities=f(c),a.submit=function(a,b){if(a){var a=angular.copy(a);return a.tags=d(a.tags),a.budget=a.budget_not_sure||!a.budget?[]:[parseFloat(a.budget),parseFloat(a.budget)],delete a.budget_not_sure,a.location=a.no_location_preference||!a.location?"":a.location.name,delete a.no_location_preference,b.submit(a,b)}}}]),angular.module("42straatApp").constant("/pages/build/house/tags",{"Construction Company":"Construction Company",Architect:"Architect",Foreman:"Foreman","Mortgage Adviser":"Mortgage Adviser",Plot:"Plot"});