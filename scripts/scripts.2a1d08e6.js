"use strict";angular.module("42straatApp",["ngRoute","ngTouch","ngLocale","/mr/session","/mr/form","templates-pages"]).config(["$routeProvider",function(a){a.when("/signin",{templateUrl:"pages/signin/signin.html",signin:!0}).when("/signup",{templateUrl:"pages/signup/signup.html",signin:!0}).when("/",{templateUrl:"pages/land/land.html",signin:!0}).when("/my",{templateUrl:"pages/home/home.html",auth:!0}).when("/house/build",{templateUrl:"pages/projects/build/house.html",auth:!0}).otherwise({redirectTo:"/"})}]).run(["Session","$location","$rootScope","$route","$window",function(a,b,c,d,e){function f(a){b.path(a)}function g(a){var b;return angular.forEach(j,function(c){!b&&c.regexp.test(a)&&(b=c)}),b||j[null]}var h="/signin",i="/my",j=d.routes;a.setConfig({apiUrl:"http://api.45straat.nl/api",tokenUrl:"login",userDataUrl:"/$api$/users/$username$",apiPlaceholder:"/$api$",publicApiPlaceholder:"/$public/api$"}),c.$on("$locationChangeStart",function(){var c=g(b.path());c&&(c.auth&&!a.authorized?f(h):c.signin&&a.authorized&&f(i))}),c.$on("$routeChangeStart",function(){e.scrollTo(0,0)}),a.$watch("authorized",function(a){console.log("Auth changed"),d.current?a&&d.current.$$route.signin?f(i):!a&&d.current.$$route.auth&&f(h):console.log("Wtf?")})}]),angular.module("42straatApp").controller("/pages/build/house/new",["$scope","/pages/build/house/tags","/pages/build/house/price/ranges",function(a,b,c){function d(a){return a?a.filter(function(a){return a.checked}).map(function(a){return a.label}):[]}function e(a){var b=[];return angular.forEach(a,function(a){b.push({model:a,checked:-1!==["Construction Company","Architect","Mortgage Adviser"].indexOf(a)})}),b}var f=a.project={tags:e(b),ranges:e(c)},g=f.ranges.filter(function(a){return a.model.code===c.PRICE_RANGE_DONT_KNOW.code})[0],h=f.ranges.filter(function(a){return a.model.code!==c.PRICE_RANGE_DONT_KNOW.code});a.checkRange=function(a){a.checked||a.model.code!==c.PRICE_RANGE_DONT_KNOW.code||h.forEach(function(a){a.checked=!1})},a.$watch("project.ranges",function(){var a=h.some(function(a){return a.checked});g.checked===a&&(g.checked=!a)},!0),a.submit=function(a,b){if(a){var a=angular.copy(a);return a.tags=d(a.tags),b.submit(a,b)}}}]),angular.module("42straatApp").constant("/pages/build/house/price/ranges",{PRICE_RANGE_DONT_KNOW:{code:10,label:"Not sure"},PRICE_RANGE_100_200:{code:20,form:1e5,to:2e5},PRICE_RANGE_200_300:{code:30,form:2e5,to:3e5},PRICE_RANGE_300_500:{code:40,form:3e5,to:5e5},PRICE_RANGE_500_700:{code:50,form:5e5,to:7e5},PRICE_RANGE_700_1000:{code:60,form:7e5,to:1e6},PRICE_RANGE_1000_1500:{code:70,form:1e6,to:15e5},PRICE_RANGE_1500_2000:{code:80,form:15e5,to:2e6},PRICE_RANGE_2000_9999:{code:90,label:"no then â‚¬2,000,000.00"}}),angular.module("42straatApp").constant("/pages/build/house/tags",{"Construction Company":"Construction Company",Architect:"Architect",Foreman:"Foreman","Mortgage Adviser":"Mortgage Adviser",Plot:"Plot"});